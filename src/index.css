@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap');
@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --color-primary: #afa88c;
  --color-primary-foreground: #46433a;

  --color-background: #c4c0a3;
  --color-foreground: #46433a;
  
  --color-card: #e9e1bd;
  --color-card-foreground: #46433a;
  
  --color-border: #a39e83;

  --font-mono: Roboto Mono, monospace;
}

@layer base {
  @variant dark {
    --color-primary: #46433a;
    --color-primary-foreground: #dedabd;
    
    --color-background: #1a1914;
    --color-foreground: #dedabd;
    
    --color-card: #2a2925;
    --color-card-foreground: #dedabd;
    
    --color-border: #131007;
  }

  body {
    @apply font-mono bg-background text-foreground;
    min-height: 100vh;
  }
}

@layer components {
  .loading-spinner {
    --spinner-border: 3px solid;
    --spinner-border-color: var(--color-foreground) var(--color-foreground) transparent;
    
    @apply size-10 rounded-full inline-block relative;
    border: var(--spinner-border);
    border-color: var(--spinner-border-color);
    animation: rotation 1s linear infinite;

    &::after {
      content: '';
      @apply size-5 absolute inset-0 m-auto rounded-full;
      border: var(--spinner-border);
      border-color: var(--spinner-border-color);
      animation: rotation-back 0.5s linear infinite;
      transform-origin: center center;
    }
  }

  .loading-ellipsis {
    @apply relative mr-9;
  }

  .loading-ellipsis::after {
    @apply overflow-hidden inline-block align-bottom absolute bottom-0;
    content: "...";
    animation: ellipsis-dot 1.5s infinite .5s;
    animation-fill-mode: forwards;
  }

  .button-square {
    @apply flex gap-2.5;
    @apply bg-primary text-primary-foreground px-3 py-1.5 text-start leading-tight;
    @apply border-b-1 border-r-1 border-border shadow-sm;
    transition: translate .2s ease-in-out;

    & .square {
      @apply min-w-[1lh] size-[1lh] flex flex-col justify-center;

      &::before {
        @apply content-[""] min-w-[1em] inline-block bg-primary-foreground self-baseline size-[1em];
      }
    }

    &:hover {
      @apply bg-primary-foreground text-card cursor-pointer;
      @apply -translate-x-3;

      & .square::before {
        @apply bg-card;
      }
    }
  }

  .border-double-accent {
    @apply border-l-10 relative;

    &::before {
      @apply bg-foreground absolute block;
      content: "";
      width: 2px;
      height: 100%;
      left: 5px;
      top: 0;
    }
  }
}

@utility text-cursor-* {
  &:last-child::after {
    content: '';
    background-color: var(--color-foreground);
    width: .1em;
    height: calc(1em * --value(--leading-*));
    display: inline-block;
    animation: cursor-blink 1s steps(1) infinite .7s;
    vertical-align: bottom;
  }
}

@utility max-w-content {
  @apply max-w-7xl;
}

@keyframes rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
} 
    
@keyframes rotation-back {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(-360deg);
  }
}

@keyframes ellipsis-dot {
  25% {
    content: "";
  }
  50% {
    content: ".";
  }
  75% {
    content: "..";
  }
  100% {
    content: "...";
  }
}

@keyframes cursor-blink {
  from, to {
    background-color: transparent;
  }

  50% {
    background-color: var(--color-foreground);
  }
}